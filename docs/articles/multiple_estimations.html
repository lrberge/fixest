<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="fixest">
<title>Multiple estimations • fixest</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Multiple estimations">
<meta property="og:description" content="fixest">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">fixest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.11.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/fixest_walkthrough.html">Fast Fixed-Effects Estimation: Short Introduction</a>
    <a class="dropdown-item" href="../articles/multiple_estimations.html">Multiple estimations</a>
    <a class="dropdown-item" href="../articles/standard_errors.html">On standard-errors</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Estimation tables</h6>
    <a class="dropdown-item" href="../articles/exporting_tables.html">Exporting estimation tables</a>
    <a class="dropdown-item" href="../articles/etable_new_features.html">`etable`: new features in `fixest` 0.10.2</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lrberge/fixest/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Multiple estimations</h1>
                        <h4 data-toc-skip class="author">Laurent
Berge</h4>
            
            <h4 data-toc-skip class="date">2023-09-08</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/lrberge/fixest/blob/HEAD/vignettes/multiple_estimations.Rmd" class="external-link"><code>vignettes/multiple_estimations.Rmd</code></a></small>
      <div class="d-none name"><code>multiple_estimations.Rmd</code></div>
    </div>

    
    
<p>Multiple estimations can be a chore to set up. Varying
left-hand-sides (LHS), right-hand-sides (RHS) or samples require either
many lines of code, or loops with formula/data manipulation. The package
<code>fixest</code> simplifies multiple estimations by providing an
optimized procedure along with a clear and concise syntax.</p>
<p>On the one hand, stepwise functions facilitate the sequential
inclusion of variables in the RHS or in the fixed-effects part of the
formula. On the other hand, intuitive methods are introduced to
manipulate the results from multiple estimations, making it easy to
visualize or export any wanted set of results.</p>
<div class="section level2">
<h2 id="first-illustration">First illustration<a class="anchor" aria-label="anchor" href="#first-illustration"></a>
</h2>
<p>What does a multiple estimation look like? Let’s give it a try:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">base</span> <span class="op">=</span> <span class="va">iris</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">base</span><span class="op">)</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"species"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">res_multi</span> <span class="op">=</span> <span class="fu"><a href="../reference/feols.html">feols</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">y1</span>, <span class="va">y2</span><span class="op">)</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="fu"><a href="../reference/stepwise.html">csw</a></span><span class="op">(</span><span class="va">x2</span>, <span class="va">x2</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="../reference/stepwise.html">sw0</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span>, <span class="va">base</span>, fsplit <span class="op">=</span> <span class="op">~</span><span class="va">species</span><span class="op">)</span></span></code></pre></div>
<p>With the previous line of code (90 characters long), we have just
performed 32 estimations: eight different functional forms on four
different samples.</p>
<p>The previous code leads to the following results:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">res_multi</span>, <span class="st">"compact"</span>, se <span class="op">=</span> <span class="st">"hetero"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##         sample   fixef lhs               rhs     (Intercept)                x1</span></span>
<span><span class="co">## 1  Full sample 1        y1 x1 + x2           4.19*** (0.104)  0.542*** (0.076)</span></span>
<span><span class="co">## 2  Full sample 1        y1 x1 + x2 + I(x2^2) 4.27*** (0.101)  0.719*** (0.082)</span></span>
<span><span class="co">## 3  Full sample 1        y2 x1 + x2           3.59*** (0.103) -0.257*** (0.066)</span></span>
<span><span class="co">## 4  Full sample 1        y2 x1 + x2 + I(x2^2) 3.68*** (0.097)    -0.030 (0.078)</span></span>
<span><span class="co">## 5  Full sample species  y1 x1 + x2                            0.906*** (0.076)</span></span>
<span><span class="co">## 6  Full sample species  y1 x1 + x2 + I(x2^2)                  0.900*** (0.077)</span></span>
<span><span class="co">## 7  Full sample species  y2 x1 + x2                              0.155* (0.073)</span></span>
<span><span class="co">## 8  Full sample species  y2 x1 + x2 + I(x2^2)                    0.148. (0.075)</span></span>
<span><span class="co">## 9  setosa      1        y1 x1 + x2           4.25*** (0.474)     0.399 (0.325)</span></span>
<span><span class="co">## 10 setosa      1        y1 x1 + x2 + I(x2^2) 4.00*** (0.504)     0.405 (0.325)</span></span>
<span><span class="co">## 11 setosa      1        y2 x1 + x2           2.89*** (0.416)     0.247 (0.305)</span></span>
<span><span class="co">## 12 setosa      1        y2 x1 + x2 + I(x2^2) 2.82*** (0.423)     0.248 (0.304)</span></span>
<span><span class="co">## 13 setosa      species  y1 x1 + x2                               0.399 (0.325)</span></span>
<span><span class="co">## 14 setosa      species  y1 x1 + x2 + I(x2^2)                     0.405 (0.325)</span></span>
<span><span class="co">## 15 setosa      species  y2 x1 + x2                               0.247 (0.305)</span></span>
<span><span class="co">## 16 setosa      species  y2 x1 + x2 + I(x2^2)                     0.248 (0.304)</span></span>
<span><span class="co">## 17 versicolor  1        y1 x1 + x2           2.38*** (0.423)  0.934*** (0.166)</span></span>
<span><span class="co">## 18 versicolor  1        y1 x1 + x2 + I(x2^2)   0.323 (1.44)   0.901*** (0.164)</span></span>
<span><span class="co">## 19 versicolor  1        y2 x1 + x2           1.25*** (0.275)     0.067 (0.095)</span></span>
<span><span class="co">## 20 versicolor  1        y2 x1 + x2 + I(x2^2)   0.097 (1.01)      0.048 (0.099)</span></span>
<span><span class="co">## 21 versicolor  species  y1 x1 + x2                            0.934*** (0.166)</span></span>
<span><span class="co">## 22 versicolor  species  y1 x1 + x2 + I(x2^2)                  0.901*** (0.164)</span></span>
<span><span class="co">## 23 versicolor  species  y2 x1 + x2                               0.067 (0.095)</span></span>
<span><span class="co">## 24 versicolor  species  y2 x1 + x2 + I(x2^2)                     0.048 (0.099)</span></span>
<span><span class="co">## 25 virginica   1        y1 x1 + x2             1.05. (0.539)  0.995*** (0.090)</span></span>
<span><span class="co">## 26 virginica   1        y1 x1 + x2 + I(x2^2)   -2.39 (2.04)   0.994*** (0.088)</span></span>
<span><span class="co">## 27 virginica   1        y2 x1 + x2             1.06. (0.572)     0.149 (0.107)</span></span>
<span><span class="co">## 28 virginica   1        y2 x1 + x2 + I(x2^2)    1.10 (1.76)      0.149 (0.108)</span></span>
<span><span class="co">## 29 virginica   species  y1 x1 + x2                            0.995*** (0.090)</span></span>
<span><span class="co">## 30 virginica   species  y1 x1 + x2 + I(x2^2)                  0.994*** (0.088)</span></span>
<span><span class="co">## 31 virginica   species  y2 x1 + x2                               0.149 (0.107)</span></span>
<span><span class="co">## 32 virginica   species  y2 x1 + x2 + I(x2^2)                     0.149 (0.108)</span></span>
<span><span class="co">##                  x2          I(x2^2)</span></span>
<span><span class="co">## 1   -0.320. (0.170)                 </span></span>
<span><span class="co">## 2  -1.52*** (0.307) 0.348*** (0.075)</span></span>
<span><span class="co">## 3    0.364* (0.142)                 </span></span>
<span><span class="co">## 4  -1.18*** (0.313) 0.446*** (0.074)</span></span>
<span><span class="co">## 5    -0.006 (0.163)                 </span></span>
<span><span class="co">## 6     0.290 (0.408)   -0.088 (0.117)</span></span>
<span><span class="co">## 7  0.623*** (0.114)                 </span></span>
<span><span class="co">## 8    0.951* (0.472)   -0.097 (0.125)</span></span>
<span><span class="co">## 9    0.712. (0.418)                 </span></span>
<span><span class="co">## 10    2.51. (1.47)     -2.91 (2.10) </span></span>
<span><span class="co">## 11    0.702 (0.560)                 </span></span>
<span><span class="co">## 12     1.27 (2.39)    -0.911 (3.28) </span></span>
<span><span class="co">## 13   0.712. (0.418)                 </span></span>
<span><span class="co">## 14    2.51. (1.47)     -2.91 (2.10) </span></span>
<span><span class="co">## 15    0.702 (0.560)                 </span></span>
<span><span class="co">## 16     1.27 (2.39)    -0.911 (3.28) </span></span>
<span><span class="co">## 17   -0.320 (0.364)                 </span></span>
<span><span class="co">## 18     3.01 (2.31)     -1.24 (0.841)</span></span>
<span><span class="co">## 19 0.929*** (0.244)                 </span></span>
<span><span class="co">## 20    2.80. (1.65)    -0.695 (0.583)</span></span>
<span><span class="co">## 21   -0.320 (0.364)                 </span></span>
<span><span class="co">## 22     3.01 (2.31)     -1.24 (0.841)</span></span>
<span><span class="co">## 23 0.929*** (0.244)                 </span></span>
<span><span class="co">## 24    2.80. (1.65)    -0.695 (0.583)</span></span>
<span><span class="co">## 25    0.007 (0.205)                 </span></span>
<span><span class="co">## 26    3.50. (2.09)    -0.870 (0.519)</span></span>
<span><span class="co">## 27 0.535*** (0.122)                 </span></span>
<span><span class="co">## 28    0.503 (1.56)     0.008 (0.388)</span></span>
<span><span class="co">## 29    0.007 (0.205)                 </span></span>
<span><span class="co">## 30    3.50. (2.09)    -0.870 (0.519)</span></span>
<span><span class="co">## 31 0.535*** (0.122)                 </span></span>
<span><span class="co">## 32    0.503 (1.56)     0.008 (0.388)</span></span></code></pre>
<p>This vignette now details how to perform multiple estimations for
multiple: LHSs, RHSs, fixed-effects, or samples. It then comes to
describe the various methods to access the results.</p>
</div>
<div class="section level2">
<h2 id="performing-multiple-estimations">Performing multiple estimations<a class="anchor" aria-label="anchor" href="#performing-multiple-estimations"></a>
</h2>
<div class="section level5">
<h5 id="multiple-lhs">Multiple LHS<a class="anchor" aria-label="anchor" href="#multiple-lhs"></a>
</h5>
<p>To perform an estimation on multiple LHS, simply wrap the different
LHS in <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/etable.html">etable</a></span><span class="op">(</span><span class="fu"><a href="../reference/feols.html">feols</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">y1</span>, <span class="va">y2</span><span class="op">)</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span>, <span class="va">base</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                 feols(c(y1, y2)..1 feols(c(y1, y2) ..2</span></span>
<span><span class="co">## Dependent Var.:                 y1                  y2</span></span>
<span><span class="co">##                                                       </span></span>
<span><span class="co">## Constant         4.191*** (0.0970)   3.587*** (0.0937)</span></span>
<span><span class="co">## x1              0.5418*** (0.0693) -0.2571*** (0.0669)</span></span>
<span><span class="co">## x2               -0.3196* (0.1605)    0.3640* (0.1550)</span></span>
<span><span class="co">## _______________ __________________ ___________________</span></span>
<span><span class="co">## S.E. type                      IID                 IID</span></span>
<span><span class="co">## Observations                   150                 150</span></span>
<span><span class="co">## R2                         0.76626             0.21310</span></span>
<span><span class="co">## Adj. R2                    0.76308             0.20240</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span></code></pre>
</div>
<div class="section level5">
<h5 id="multiple-rhs-and-fixed-effects-stepwise-functions">Multiple RHS and fixed-effects: stepwise functions<a class="anchor" aria-label="anchor" href="#multiple-rhs-and-fixed-effects-stepwise-functions"></a>
</h5>
<p>To estimate multiple RHS (or fixed-effects), you need to use a
specific set of functions: the <em>stepwise</em> functions. There are
five of them: <code>sw</code>, <code>sw0</code>, <code>csw</code>,
<code>csw0</code> and <code>mvsw</code>.</p>
<ul>
<li><p><code>sw</code>: this function is replaced sequentially by each
of its arguments. For example, <code>y ~ x1 + sw(x2, x3)</code> leads to
two estimations: <code>y ~ x1 + x2</code> and
<code>y ~ x1 + x3</code>.</p></li>
<li><p><code>sw0</code>: identical to <code>sw</code> but first adds the
empty element. E.g. <code>y ~ x1 + sw0(x2, x3)</code> leads to three
estimations: <code>y ~ x1</code>, <code>y ~ x1 + x2</code> and
<code>y ~ x1 + x3</code>.</p></li>
<li><p><code>csw</code>: it stands for <em>cumulative</em> stepwise. It
adds to the formula each of its arguments sequentially. E.g.
<code>y ~ x1 + csw(x2, x3)</code> will become <code>y ~ x1 + x2</code>
and <code>y ~ x1 + x2 + x3</code>.</p></li>
<li><p><code>csw0</code>: identical to <code>csw</code> but first adds
the empty element. E.g. <code>y ~ x1 + csw0(x2, x3)</code> leads to
three estimations: <code>y ~ x1</code>, <code>y ~ x1 + x2</code> and
<code>y ~ x1 + x2 + x3</code>.</p></li>
<li><p><code>mvsw</code>: it stands for multiverse stepwise. It will
add, in a stepwise fashion, all possible combinations of the variables
in its arguments. For example <code>mvsw(x1, x2, x3)</code> is
equivalent to
<code>sw0(x1, x2, x3, x1 + x2, x1 + x3, x2 + x3, x1 + x2 + x3)</code>.
The number of models to estimate grows at a factorial rate: so be
<em>very</em> cautious!</p></li>
</ul>
<p>The stepwise functions can be applied both to the linear part and the
fixed-effects part of the formula. Note that at most one stepwise
function can be applied per part.</p>
<p>Here is an example:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/etable.html">etable</a></span><span class="op">(</span><span class="fu"><a href="../reference/feols.html">feols</a></span><span class="op">(</span><span class="va">y1</span> <span class="op">~</span> <span class="fu"><a href="../reference/stepwise.html">csw</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="../reference/stepwise.html">sw0</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span>, <span class="va">base</span>, cluster <span class="op">=</span> <span class="op">~</span><span class="va">species</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                 feols(y1 ~ csw..1 feols(y1 ~ cs..2 feols(y1 ~ csw..3</span></span>
<span><span class="co">## Dependent Var.:                y1               y1                y1</span></span>
<span><span class="co">##                                                                     </span></span>
<span><span class="co">## Constant         4.307** (0.1917) 4.191** (0.2443)                  </span></span>
<span><span class="co">## x1              0.4089** (0.0401) 0.5418* (0.1115) 0.9046** (0.0758)</span></span>
<span><span class="co">## x2                                -0.3196 (0.1707)                  </span></span>
<span><span class="co">## Fixed-Effects:  ----------------- ---------------- -----------------</span></span>
<span><span class="co">## species                        No               No               Yes</span></span>
<span><span class="co">## _______________ _________________ ________________ _________________</span></span>
<span><span class="co">## S.E.: Clustered       by: species      by: species       by: species</span></span>
<span><span class="co">## Observations                  150              150               150</span></span>
<span><span class="co">## R2                        0.75995          0.76626           0.83672</span></span>
<span><span class="co">## Within R2                      --               --           0.57178</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                 feols(y1 ~ csw..4</span></span>
<span><span class="co">## Dependent Var.:                y1</span></span>
<span><span class="co">##                                  </span></span>
<span><span class="co">## Constant                         </span></span>
<span><span class="co">## x1              0.9059** (0.0814)</span></span>
<span><span class="co">## x2               -0.0060 (0.1260)</span></span>
<span><span class="co">## Fixed-Effects:  -----------------</span></span>
<span><span class="co">## species                       Yes</span></span>
<span><span class="co">## _______________ _________________</span></span>
<span><span class="co">## S.E.: Clustered       by: species</span></span>
<span><span class="co">## Observations                  150</span></span>
<span><span class="co">## R2                        0.83673</span></span>
<span><span class="co">## Within R2                 0.57179</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span></code></pre>
<p>As you can see, if the stepwise functions are in both parts, there
will be as many estimations as the cardinal product of the two
parts.</p>
</div>
<div class="section level5">
<h5 id="split-sample-estimations">Split sample estimations<a class="anchor" aria-label="anchor" href="#split-sample-estimations"></a>
</h5>
<p>To perform split sample estimations, use either the argument
<code>split</code> or <code>fsplit</code>. The argument
<code>split</code> accepts a variable that will be treated as a factor,
and an estimation will be performed for each sub-sample defined by each
level of this variable. The argument <code>fsplit</code> is identical
but first adds the full sample.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/etable.html">etable</a></span><span class="op">(</span><span class="fu"><a href="../reference/feols.html">feols</a></span><span class="op">(</span><span class="va">y1</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span>, <span class="va">base</span>, fsplit <span class="op">=</span> <span class="op">~</span><span class="va">species</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                  feols(y1 ~ x1 +..1 feols(y1 ~ x1 ..2 feols(y1 ~ x1 +..3</span></span>
<span><span class="co">## Sample (species)        Full sample            setosa         versicolor</span></span>
<span><span class="co">## Dependent Var.:                  y1                y1                 y1</span></span>
<span><span class="co">##                                                                         </span></span>
<span><span class="co">## Constant          4.191*** (0.0970) 4.248*** (0.4114)  2.381*** (0.4493)</span></span>
<span><span class="co">## x1               0.5418*** (0.0693)   0.3990 (0.2958) 0.9342*** (0.1693)</span></span>
<span><span class="co">## x2                -0.3196* (0.1605)   0.7121 (0.4874)   -0.3200 (0.4024)</span></span>
<span><span class="co">## ________________ __________________ _________________ __________________</span></span>
<span><span class="co">## S.E. type                       IID               IID                IID</span></span>
<span><span class="co">## Observations                    150                50                 50</span></span>
<span><span class="co">## R2                          0.76626           0.11173            0.57432</span></span>
<span><span class="co">## Adj. R2                     0.76308           0.07393            0.55620</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                  feols(y1 ~ x1 +..4</span></span>
<span><span class="co">## Sample (species)          virginica</span></span>
<span><span class="co">## Dependent Var.:                  y1</span></span>
<span><span class="co">##                                    </span></span>
<span><span class="co">## Constant            1.052* (0.5139)</span></span>
<span><span class="co">## x1               0.9946*** (0.0893)</span></span>
<span><span class="co">## x2                  0.0071 (0.1795)</span></span>
<span><span class="co">## ________________ __________________</span></span>
<span><span class="co">## S.E. type                       IID</span></span>
<span><span class="co">## Observations                     50</span></span>
<span><span class="co">## R2                          0.74689</span></span>
<span><span class="co">## Adj. R2                     0.73612</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span></code></pre>
</div>
<div class="section level5">
<h5 id="combining-multiple-estimations">Combining multiple estimations<a class="anchor" aria-label="anchor" href="#combining-multiple-estimations"></a>
</h5>
<p>You can combine multiple LHS to multiple RHS to multiple
fixed-effects to multiple samples. The total number of estimations is
always equal to the cardinal product of the total number of parts.</p>
</div>
</div>
<div class="section level2">
<h2 id="manipulation-of-multiple-estimations">Manipulation of multiple estimations<a class="anchor" aria-label="anchor" href="#manipulation-of-multiple-estimations"></a>
</h2>
<p>We’ve just seen how to perform multiple estimations, now let’s see
how to manipulate them. First a multiple estimation is a
<code>fixest_multi</code> object with its own set of methods. We can
access its elements by using keys. There are five keys:
<code>sample</code>, <code>lhs</code>, <code>rhs</code>,
<code>fixef</code>, and <code>iv</code>.</p>
<div class="section level4">
<h4 id="basic-access">Basic access<a class="anchor" aria-label="anchor" href="#basic-access"></a>
</h4>
<p><code>res_multi[sample = 1]</code> returns all the results for the
first sample. <code>res_multi[lhs = .N]</code> returns all the results
for the last dependent variable (the special variable <code>.N</code>
can be used to refer to the last element). etc.</p>
<p>You can combine different keys:
<code>res_multi[sample = -1, lhs = 1]</code> will select all results for
all samples but the first, and for the first dependent variable.</p>
<p>Note that these arguments accept regular expressions, so
<code>res_multi[fixef = "spe"]</code> returns all results for which the
character string <code>"spe"</code> is contained in the fixed-effects
part of the formula.</p>
</div>
<div class="section level4">
<h4 id="putting-order">Putting order<a class="anchor" aria-label="anchor" href="#putting-order"></a>
</h4>
<p>The results in a <code>fixest_multi</code> object have a specific
order, organized in a tree. By default the order is <span class="math inline">\(sample \rightarrow lhs \rightarrow fixef
\rightarrow rhs \rightarrow iv\)</span>.</p>
<p>Changing the order of the results is important to organize/export
them. By default, when one accesses <code>fixest_multi</code> objects
the results are reordered according to the order of the arguments
used.</p>
<p>For instance, <code>res_mutli[rhs = 1:.N, fixef = 1:.N]</code> will
place the RHS at the root of the tree followed by the fixed-effects.
Then the sample and the LHS will follow.</p>
<p>The arguments accept logical values:
<code>res_multi[fixef = TRUE, sample = FALSE]</code> will keep
<em>all</em> results but will place <code>fixef</code> as the root and
<code>sample</code> as the last leaf.</p>
<p>This subsetting can then be used to easily obtain the appropriate set
of results and ordering:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/etable.html">etable</a></span><span class="op">(</span><span class="va">res_multi</span><span class="op">[</span>lhs <span class="op">=</span> <span class="fl">1</span>, fixef <span class="op">=</span> <span class="fl">1</span>, rhs <span class="op">=</span> <span class="cn">TRUE</span>, sample <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                  res_multi[lhs ..1 res_multi[lhs =..2 res_multi[lhs =..3</span></span>
<span><span class="co">## Sample (species)            setosa         versicolor          virginica</span></span>
<span><span class="co">## Dependent Var.:                 y1                 y1                 y1</span></span>
<span><span class="co">##                                                                         </span></span>
<span><span class="co">## Constant         4.248*** (0.4114)  2.381*** (0.4493)    1.052* (0.5139)</span></span>
<span><span class="co">## x1                 0.3990 (0.2958) 0.9342*** (0.1693) 0.9946*** (0.0893)</span></span>
<span><span class="co">## x2                 0.7121 (0.4874)   -0.3200 (0.4024)    0.0071 (0.1795)</span></span>
<span><span class="co">## x2 square                                                               </span></span>
<span><span class="co">## ________________ _________________ __________________ __________________</span></span>
<span><span class="co">## S.E. type                      IID                IID                IID</span></span>
<span><span class="co">## Observations                    50                 50                 50</span></span>
<span><span class="co">## R2                         0.11173            0.57432            0.74689</span></span>
<span><span class="co">## Adj. R2                    0.07393            0.55620            0.73612</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                  res_multi[lhs ..4 res_multi[lhs =..5 res_multi[lhs =..6</span></span>
<span><span class="co">## Sample (species)            setosa         versicolor          virginica</span></span>
<span><span class="co">## Dependent Var.:                 y1                 y1                 y1</span></span>
<span><span class="co">##                                                                         </span></span>
<span><span class="co">## Constant         4.004*** (0.4892)     0.3234 (1.791)     -2.393 (2.173)</span></span>
<span><span class="co">## x1                 0.4048 (0.2963) 0.9006*** (0.1710) 0.9939*** (0.0878)</span></span>
<span><span class="co">## x2                   2.511 (2.011)      3.015 (2.839)      3.504 (2.153)</span></span>
<span><span class="co">## x2 square           -2.913 (3.157)     -1.236 (1.042)   -0.8703 (0.5340)</span></span>
<span><span class="co">## ________________ _________________ __________________ __________________</span></span>
<span><span class="co">## S.E. type                      IID                IID                IID</span></span>
<span><span class="co">## Observations                    50                 50                 50</span></span>
<span><span class="co">## R2                         0.12786            0.58696            0.76071</span></span>
<span><span class="co">## Adj. R2                    0.07098            0.56002            0.74510</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="some-notes">Some notes<a class="anchor" aria-label="anchor" href="#some-notes"></a>
</h2>
<div class="section level5">
<h5 id="note-on-standard-errors">Note on standard-errors<a class="anchor" aria-label="anchor" href="#note-on-standard-errors"></a>
</h5>
<p>Defining the standard-errors at estimation time, by using the
arguments <code>vcov</code>, can be useful to obtain a coherent set of
standard-errors across results, especially if the fixed-effects are
modified (which will modify the default clustering of standard-errors
across models).</p>
</div>
<div class="section level5">
<h5 id="note-on-ivs">Note on IVs<a class="anchor" aria-label="anchor" href="#note-on-ivs"></a>
</h5>
<p>IV estimations return a regular <code>fixest</code> object. The
<code>summary</code> applied to it however can return a
<code>fixest_multi</code> object. This is the case when both the first
and second stage regressions are requested using the argument
<code>stage = 1:2</code>. You can then cherry-pick the results as before
using, e.g. <code>res[iv = 1]</code>. Note, importantly, that the index
refers to the order of the results and 1 here does not mean the first
stage.</p>
</div>
<div class="section level5">
<h5 id="note-on-memory-usage">Note on memory usage<a class="anchor" aria-label="anchor" href="#note-on-memory-usage"></a>
</h5>
<p>The objects returned by <code>fixest</code> estimations are large.
They contain the necessary information to apply various methods without
incurring additional computing costs. This is particularly true for
clustering the standard-errors for instance. Stated differently speed is
privileged over memory usage.</p>
<p>The problem when it comes to multiple estimations is that it is very
easy to perform many many estimations leading to a ballooning of object
size possibly getting out of control at some point. To circumvent this
issue, here’s what to do:</p>
<ol style="list-style-type: decimal">
<li>use the argument <code>vcov</code> to get a summary of the results
with the appropriate standard-errors at estimation time,</li>
<li>use the argument <code>lean = TRUE</code>.</li>
</ol>
<p>This will perform the estimation with the appropriate standard errors
(point 1) and clean any large object from the results (point 2).</p>
<p>The drawback of this is that you won’t be able to apply some methods
to the results (like changing the type of standard-errors,
<code>predict</code>, <code>resid</code>, etc). But the amount of memory
saved can be considerable.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Laurent Berge.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
