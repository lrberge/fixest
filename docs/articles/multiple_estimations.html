<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multiple estimations • fixest</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Multiple estimations">
<meta property="og:description" content="fixest">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fixest</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.10.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/etable_new_features.html">`etable`: new features in `fixest` 0.10.2</a>
    </li>
    <li>
      <a href="../articles/exporting_tables.html">Exporting estimation tables</a>
    </li>
    <li>
      <a href="../articles/fixest_walkthrough.html">Fast Fixed-Effects Estimation: Short introduction</a>
    </li>
    <li>
      <a href="../articles/multiple_estimations.html">Multiple estimations</a>
    </li>
    <li>
      <a href="../articles/standard_errors.html">On standard-errors</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/lrberge/fixest/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Multiple estimations</h1>
                        <h4 data-toc-skip class="author">Laurent Berge</h4>
            
            <h4 data-toc-skip class="date">2022-03-31</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/lrberge/fixest/blob/HEAD/vignettes/multiple_estimations.Rmd" class="external-link"><code>vignettes/multiple_estimations.Rmd</code></a></small>
      <div class="hidden name"><code>multiple_estimations.Rmd</code></div>

    </div>

    
    
<p>Multiple estimations can be a chore to set up. Varying left-hand-sides (LHS), right-hand-sides (RHS) or samples require either many lines of code, or loops with formula/data manipulation. The package <code>fixest</code> simplifies multiple estimations by providing an optimized procedure along with a clear and concise syntax.</p>
<p>On the one hand, stepwise functions facilitate the sequential inclusion of variables in the RHS or in the fixed-effects part of the formula. On the other hand, intuitive methods are introduced to manipulate the results from multiple estimations, making it easy to visualize or export any wanted set of results.</p>
<div class="section level2">
<h2 id="first-illustration">First illustration<a class="anchor" aria-label="anchor" href="#first-illustration"></a>
</h2>
<p>What does a multiple estimation look like? Let’s give it a try:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">base</span> <span class="op">=</span> <span class="va">iris</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">base</span><span class="op">)</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"species"</span><span class="op">)</span>

<span class="va">res_multi</span> <span class="op">=</span> <span class="fu"><a href="../reference/feols.html">feols</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">y1</span>, <span class="va">y2</span><span class="op">)</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="fu"><a href="../reference/stepwise.html">csw</a></span><span class="op">(</span><span class="va">x2</span>, <span class="va">x2</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="../reference/stepwise.html">sw0</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span>, <span class="va">base</span>, fsplit <span class="op">=</span> <span class="op">~</span><span class="va">species</span><span class="op">)</span></code></pre></div>
<p>With the previous line of code (90 characters long), we have just performed 32 estimations: eight different functional forms on four different samples.</p>
<p>The previous code leads to the following results:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">res_multi</span>, <span class="st">"compact"</span>, se <span class="op">=</span> <span class="st">"hetero"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##         sample lhs   fixef               rhs      (Intercept)</span>
<span class="co">## 1  Full sample  y1 1       x1 + x2           4.19*** (0.104) </span>
<span class="co">## 2  Full sample  y1 1       x1 + x2 + I(x2^2) 4.27*** (0.101) </span>
<span class="co">## 3  Full sample  y1 species x1 + x2                           </span>
<span class="co">## 4  Full sample  y1 species x1 + x2 + I(x2^2)                 </span>
<span class="co">## 5  Full sample  y2 1       x1 + x2           3.59*** (0.103) </span>
<span class="co">## 6  Full sample  y2 1       x1 + x2 + I(x2^2) 3.68*** (0.0969)</span>
<span class="co">## 7  Full sample  y2 species x1 + x2                           </span>
<span class="co">## 8  Full sample  y2 species x1 + x2 + I(x2^2)                 </span>
<span class="co">## 9  setosa       y1 1       x1 + x2           4.25*** (0.474) </span>
<span class="co">## 10 setosa       y1 1       x1 + x2 + I(x2^2)    4*** (0.504) </span>
<span class="co">## 11 setosa       y1 species x1 + x2                           </span>
<span class="co">## 12 setosa       y1 species x1 + x2 + I(x2^2)                 </span>
<span class="co">## 13 setosa       y2 1       x1 + x2           2.89*** (0.416) </span>
<span class="co">## 14 setosa       y2 1       x1 + x2 + I(x2^2) 2.82*** (0.423) </span>
<span class="co">## 15 setosa       y2 species x1 + x2                           </span>
<span class="co">## 16 setosa       y2 species x1 + x2 + I(x2^2)                 </span>
<span class="co">## 17 versicolor   y1 1       x1 + x2           2.38*** (0.423) </span>
<span class="co">## 18 versicolor   y1 1       x1 + x2 + I(x2^2)   0.323 (1.44)  </span>
<span class="co">## 19 versicolor   y1 species x1 + x2                           </span>
<span class="co">## 20 versicolor   y1 species x1 + x2 + I(x2^2)                 </span>
<span class="co">## 21 versicolor   y2 1       x1 + x2           1.25*** (0.275) </span>
<span class="co">## 22 versicolor   y2 1       x1 + x2 + I(x2^2)   0.097 (1.01)  </span>
<span class="co">## 23 versicolor   y2 species x1 + x2                           </span>
<span class="co">## 24 versicolor   y2 species x1 + x2 + I(x2^2)                 </span>
<span class="co">## 25 virginica    y1 1       x1 + x2             1.05. (0.539) </span>
<span class="co">## 26 virginica    y1 1       x1 + x2 + I(x2^2)   -2.39 (2.04)  </span>
<span class="co">## 27 virginica    y1 species x1 + x2                           </span>
<span class="co">## 28 virginica    y1 species x1 + x2 + I(x2^2)                 </span>
<span class="co">## 29 virginica    y2 1       x1 + x2             1.06. (0.572) </span>
<span class="co">## 30 virginica    y2 1       x1 + x2 + I(x2^2)     1.1 (1.76)  </span>
<span class="co">## 31 virginica    y2 species x1 + x2                           </span>
<span class="co">## 32 virginica    y2 species x1 + x2 + I(x2^2)                 </span>
<span class="co">##                    x1               x2           I(x2^2)</span>
<span class="co">## 1   0.542*** (0.0761)   -0.32. (0.17)                   </span>
<span class="co">## 2   0.719*** (0.0815) -1.52*** (0.307) 0.348*** (0.0748)</span>
<span class="co">## 3   0.906*** (0.0759)   -0.006 (0.163)                  </span>
<span class="co">## 4     0.9*** (0.0767)     0.29 (0.408)  -0.0879 (0.117) </span>
<span class="co">## 5  -0.257*** (0.0664)   0.364* (0.142)                  </span>
<span class="co">## 6    -0.0301 (0.0778) -1.18*** (0.313) 0.446*** (0.0737)</span>
<span class="co">## 7     0.155* (0.0735) 0.623*** (0.114)                  </span>
<span class="co">## 8     0.148. (0.0755)   0.951* (0.472)  -0.0973 (0.125) </span>
<span class="co">## 9      0.399 (0.325)    0.712. (0.418)                  </span>
<span class="co">## 10     0.405 (0.325)     2.51. (1.47)     -2.91 (2.1)   </span>
<span class="co">## 11     0.399 (0.325)    0.712. (0.418)                  </span>
<span class="co">## 12     0.405 (0.325)     2.51. (1.47)     -2.91 (2.1)   </span>
<span class="co">## 13     0.247 (0.305)     0.702 (0.56)                   </span>
<span class="co">## 14     0.248 (0.304)      1.27 (2.39)    -0.911 (3.28)  </span>
<span class="co">## 15     0.247 (0.305)     0.702 (0.56)                   </span>
<span class="co">## 16     0.248 (0.304)      1.27 (2.39)    -0.911 (3.28)  </span>
<span class="co">## 17  0.934*** (0.166)     -0.32 (0.364)                  </span>
<span class="co">## 18  0.901*** (0.164)      3.01 (2.31)     -1.24 (0.841) </span>
<span class="co">## 19  0.934*** (0.166)     -0.32 (0.364)                  </span>
<span class="co">## 20  0.901*** (0.164)      3.01 (2.31)     -1.24 (0.841) </span>
<span class="co">## 21    0.0669 (0.0949) 0.929*** (0.244)                  </span>
<span class="co">## 22     0.048 (0.0993)     2.8. (1.65)    -0.695 (0.583) </span>
<span class="co">## 23    0.0669 (0.0949) 0.929*** (0.244)                  </span>
<span class="co">## 24     0.048 (0.0993)     2.8. (1.65)    -0.695 (0.583) </span>
<span class="co">## 25  0.995*** (0.0898)  0.00706 (0.205)                  </span>
<span class="co">## 26  0.994*** (0.0881)     3.5. (2.09)     -0.87 (0.519) </span>
<span class="co">## 27  0.995*** (0.0898)  0.00706 (0.205)                  </span>
<span class="co">## 28  0.994*** (0.0881)     3.5. (2.09)     -0.87 (0.519) </span>
<span class="co">## 29     0.149 (0.107)  0.535*** (0.122)                  </span>
<span class="co">## 30     0.149 (0.108)     0.503 (1.56)   0.00798 (0.388) </span>
<span class="co">## 31     0.149 (0.107)  0.535*** (0.122)                  </span>
<span class="co">## 32     0.149 (0.108)     0.503 (1.56)   0.00798 (0.388)</span></code></pre>
<p>This vignette now details how to perform multiple estimations for multiple: LHSs, RHSs, fixed-effects, or samples. It then comes to describe the various methods to access the results.</p>
</div>
<div class="section level2">
<h2 id="performing-multiple-estimations">Performing multiple estimations<a class="anchor" aria-label="anchor" href="#performing-multiple-estimations"></a>
</h2>
<div class="section level5">
<h5 id="multiple-lhs">Multiple LHS<a class="anchor" aria-label="anchor" href="#multiple-lhs"></a>
</h5>
<p>To perform an estimation on multiple LHS, simply wrap the different LHS in <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/etable.html">etable</a></span><span class="op">(</span><span class="fu"><a href="../reference/feols.html">feols</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">y1</span>, <span class="va">y2</span><span class="op">)</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span>, <span class="va">base</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##                            model 1             model 2</span>
<span class="co">## Dependent Var.:                 y1                  y2</span>
<span class="co">##                                                       </span>
<span class="co">## (Intercept)      4.191*** (0.0970)   3.587*** (0.0937)</span>
<span class="co">## x1              0.5418*** (0.0693) -0.2571*** (0.0669)</span>
<span class="co">## x2               -0.3196* (0.1605)    0.3640* (0.1550)</span>
<span class="co">## _______________ __________________ ___________________</span>
<span class="co">## S.E. type                      IID                 IID</span>
<span class="co">## Observations                   150                 150</span>
<span class="co">## R2                         0.76626             0.21310</span>
<span class="co">## Adj. R2                    0.76308             0.20240</span>
<span class="co">## ---</span>
<span class="co">## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></code></pre>
</div>
<div class="section level5">
<h5 id="multiple-rhs-and-fixed-effects-stepwise-functions">Multiple RHS and fixed-effects: stepwise functions<a class="anchor" aria-label="anchor" href="#multiple-rhs-and-fixed-effects-stepwise-functions"></a>
</h5>
<p>To estimate multiple RHS (or fixed-effects), you need to use a specific set of functions: the <em>stepwise</em> functions. There are five of them: <code>sw</code>, <code>sw0</code>, <code>csw</code>, <code>csw0</code> and <code>mvsw</code>.</p>
<ul>
<li><p><code>sw</code>: this function is replaced sequentially by each of its arguments. For example, <code>y ~ x1 + sw(x2, x3)</code> leads to two estimations: <code>y ~ x1 + x2</code> and <code>y ~ x1 + x3</code>.</p></li>
<li><p><code>sw0</code>: identical to <code>sw</code> but first adds the empty element. E.g. <code>y ~ x1 + sw0(x2, x3)</code> leads to three estimations: <code>y ~ x1</code>, <code>y ~ x1 + x2</code> and <code>y ~ x1 + x3</code>.</p></li>
<li><p><code>csw</code>: it stands for <em>cumulative</em> stepwise. It adds to the formula each of its arguments sequentially. E.g. <code>y ~ x1 + csw(x2, x3)</code> will become <code>y ~ x1 + x2</code> and <code>y ~ x1 + x2 + x3</code>.</p></li>
<li><p><code>csw0</code>: identical to <code>csw</code> but first adds the empty element. E.g. <code>y ~ x1 + csw0(x2, x3)</code> leads to three estimations: <code>y ~ x1</code>, <code>y ~ x1 + x2</code> and <code>y ~ x1 + x2 + x3</code>.</p></li>
<li><p><code>mvsw</code>: it stands for multiverse stepwise. It will add, in a stepwise fashion, all possible combinations of the variables in its arguments. For example <code>mvsw(x1, x2, x3)</code> is equivalent to <code>sw0(x1, x2, x3, x1 + x2, x1 + x3, x2 + x3, x1 + x2 + x3)</code>. The number of models to estimate grows at a factorial rate: so be <em>very</em> cautious!</p></li>
</ul>
<p>The stepwise functions can be applied both to the linear part and the fixed-effects part of the formula. Note that at most one stepwise function can be applied per part.</p>
<p>Here is an example:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/etable.html">etable</a></span><span class="op">(</span><span class="fu"><a href="../reference/feols.html">feols</a></span><span class="op">(</span><span class="va">y1</span> <span class="op">~</span> <span class="fu"><a href="../reference/stepwise.html">csw</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">x2</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="../reference/stepwise.html">sw0</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span>, <span class="va">base</span>, cluster <span class="op">=</span> <span class="op">~</span><span class="va">species</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##                           model 1          model 2           model 3</span>
<span class="co">## Dependent Var.:                y1               y1                y1</span>
<span class="co">##                                                                     </span>
<span class="co">## (Intercept)      4.307** (0.1917) 4.191** (0.2443)                  </span>
<span class="co">## x1              0.4089** (0.0401) 0.5418* (0.1115) 0.9046** (0.0758)</span>
<span class="co">## x2                                -0.3196 (0.1707)                  </span>
<span class="co">## Fixed-Effects:  ----------------- ---------------- -----------------</span>
<span class="co">## species                        No               No               Yes</span>
<span class="co">## _______________ _________________ ________________ _________________</span>
<span class="co">## S.E.: Clustered       by: species      by: species       by: species</span>
<span class="co">## Observations                  150              150               150</span>
<span class="co">## R2                        0.75995          0.76626           0.83672</span>
<span class="co">## Within R2                      --               --           0.57178</span>
<span class="co">## </span>
<span class="co">##                           model 4</span>
<span class="co">## Dependent Var.:                y1</span>
<span class="co">##                                  </span>
<span class="co">## (Intercept)                      </span>
<span class="co">## x1              0.9059** (0.0814)</span>
<span class="co">## x2               -0.0060 (0.1260)</span>
<span class="co">## Fixed-Effects:  -----------------</span>
<span class="co">## species                       Yes</span>
<span class="co">## _______________ _________________</span>
<span class="co">## S.E.: Clustered       by: species</span>
<span class="co">## Observations                  150</span>
<span class="co">## R2                        0.83673</span>
<span class="co">## Within R2                 0.57179</span>
<span class="co">## ---</span>
<span class="co">## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></code></pre>
<p>As you can see, if the stepwise functions are in both parts, there will be as many estimations as the cardinal product of the two parts.</p>
</div>
<div class="section level5">
<h5 id="split-sample-estimations">Split sample estimations<a class="anchor" aria-label="anchor" href="#split-sample-estimations"></a>
</h5>
<p>To perform split sample estimations, use either the argument <code>split</code> or <code>fsplit</code>. The argument <code>split</code> accepts a variable that will be treated as a factor, and an estimation will be performed for each sub-sample defined by each level of this variable. The argument <code>fsplit</code> is identical but first adds the full sample.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/etable.html">etable</a></span><span class="op">(</span><span class="fu"><a href="../reference/feols.html">feols</a></span><span class="op">(</span><span class="va">y1</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span>, <span class="va">base</span>, fsplit <span class="op">=</span> <span class="op">~</span><span class="va">species</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##                             model 1           model 2            model 3</span>
<span class="co">## Sample (species)        Full sample            setosa         versicolor</span>
<span class="co">## Dependent Var.:                  y1                y1                 y1</span>
<span class="co">##                                                                         </span>
<span class="co">## (Intercept)       4.191*** (0.0970) 4.248*** (0.4114)  2.381*** (0.4493)</span>
<span class="co">## x1               0.5418*** (0.0693)   0.3990 (0.2958) 0.9342*** (0.1693)</span>
<span class="co">## x2                -0.3196* (0.1605)   0.7121 (0.4874)   -0.3200 (0.4024)</span>
<span class="co">## ________________ __________________ _________________ __________________</span>
<span class="co">## S.E. type                       IID               IID                IID</span>
<span class="co">## Observations                    150                50                 50</span>
<span class="co">## R2                          0.76626           0.11173            0.57432</span>
<span class="co">## Adj. R2                     0.76308           0.07393            0.55620</span>
<span class="co">## </span>
<span class="co">##                             model 4</span>
<span class="co">## Sample (species)          virginica</span>
<span class="co">## Dependent Var.:                  y1</span>
<span class="co">##                                    </span>
<span class="co">## (Intercept)         1.052* (0.5139)</span>
<span class="co">## x1               0.9946*** (0.0893)</span>
<span class="co">## x2                  0.0071 (0.1795)</span>
<span class="co">## ________________ __________________</span>
<span class="co">## S.E. type                       IID</span>
<span class="co">## Observations                     50</span>
<span class="co">## R2                          0.74689</span>
<span class="co">## Adj. R2                     0.73612</span>
<span class="co">## ---</span>
<span class="co">## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></code></pre>
</div>
<div class="section level5">
<h5 id="combining-multiple-estimations">Combining multiple estimations<a class="anchor" aria-label="anchor" href="#combining-multiple-estimations"></a>
</h5>
<p>You can combine multiple LHS to multiple RHS to multiple fixed-effects to multiple samples. The total number of estimations is always equal to the cardinal product of the total number of parts.</p>
</div>
</div>
<div class="section level2">
<h2 id="manipulation-of-multiple-estimations">Manipulation of multiple estimations<a class="anchor" aria-label="anchor" href="#manipulation-of-multiple-estimations"></a>
</h2>
<p>We’ve just seen how to perform multiple estimations, now let’s see how to manipulate them. First a multiple estimation is a <code>fixest_multi</code> object with its own set of methods. We can access its elements by using keys. There are five keys: <code>sample</code>, <code>lhs</code>, <code>rhs</code>, <code>fixef</code>, and <code>iv</code>.</p>
<div class="section level4">
<h4 id="basic-access">Basic access<a class="anchor" aria-label="anchor" href="#basic-access"></a>
</h4>
<p><code>res_multi[sample = 1]</code> returns all the results for the first sample. <code>res_multi[lhs = .N]</code> returns all the results for the last dependent variable (the special variable <code>.N</code> can be used to refer to the last element). etc.</p>
<p>You can combine different keys: <code>res_multi[sample = -1, lhs = 1]</code> will select all results for all samples but the first, and for the first dependent variable.</p>
<p>Note that these arguments accept regular expressions, so <code>res_multi[fixef = "spe"]</code> returns all results for which the character string <code>"spe"</code> is contained in the fixed-effects part of the formula.</p>
</div>
<div class="section level4">
<h4 id="putting-order">Putting order<a class="anchor" aria-label="anchor" href="#putting-order"></a>
</h4>
<p>The results in a <code>fixest_multi</code> object have a specific order, organized in a tree. By default the order is <span class="math inline">\(sample \rightarrow lhs \rightarrow fixef \rightarrow rhs \rightarrow iv\)</span>.</p>
<p>Changing the order of the results is important to organize/export them. By default, when one accesses <code>fixest_multi</code> objects the results are reordered according to the order of the arguments used.</p>
<p>For instance, <code>res_mutli[rhs = 1:.N, fixef = 1:.N]</code> will place the RHS at the root of the tree followed by the fixed-effects. Then the sample and the LHS will follow.</p>
<p>The arguments accept logical values: <code>res_multi[fixef = TRUE, sample = FALSE]</code> will keep <em>all</em> results but will place <code>fixef</code> as the root and <code>sample</code> as the last leaf.</p>
<p>This subsetting can then be used to easily obtain the appropriate set of results and ordering:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/etable.html">etable</a></span><span class="op">(</span><span class="va">res_multi</span><span class="op">[</span>lhs <span class="op">=</span> <span class="fl">1</span>, fixef <span class="op">=</span> <span class="fl">1</span>, rhs <span class="op">=</span> <span class="cn">TRUE</span>, sample <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##                            model 1            model 2            model 3</span>
<span class="co">## Sample (species)            setosa         versicolor          virginica</span>
<span class="co">## Dependent Var.:                 y1                 y1                 y1</span>
<span class="co">##                                                                         </span>
<span class="co">## (Intercept)      4.248*** (0.4114)  2.381*** (0.4493)    1.052* (0.5139)</span>
<span class="co">## x1                 0.3990 (0.2958) 0.9342*** (0.1693) 0.9946*** (0.0893)</span>
<span class="co">## x2                 0.7121 (0.4874)   -0.3200 (0.4024)    0.0071 (0.1795)</span>
<span class="co">## x2 square                                                               </span>
<span class="co">## ________________ _________________ __________________ __________________</span>
<span class="co">## S.E. type                      IID                IID                IID</span>
<span class="co">## Observations                    50                 50                 50</span>
<span class="co">## R2                         0.11173            0.57432            0.74689</span>
<span class="co">## Adj. R2                    0.07393            0.55620            0.73612</span>
<span class="co">## </span>
<span class="co">##                            model 4            model 5            model 6</span>
<span class="co">## Sample (species)            setosa         versicolor          virginica</span>
<span class="co">## Dependent Var.:                 y1                 y1                 y1</span>
<span class="co">##                                                                         </span>
<span class="co">## (Intercept)      4.004*** (0.4892)     0.3234 (1.791)     -2.393 (2.173)</span>
<span class="co">## x1                 0.4048 (0.2963) 0.9006*** (0.1710) 0.9939*** (0.0878)</span>
<span class="co">## x2                   2.511 (2.011)      3.015 (2.839)      3.504 (2.153)</span>
<span class="co">## x2 square           -2.913 (3.157)     -1.236 (1.042)   -0.8703 (0.5340)</span>
<span class="co">## ________________ _________________ __________________ __________________</span>
<span class="co">## S.E. type                      IID                IID                IID</span>
<span class="co">## Observations                    50                 50                 50</span>
<span class="co">## R2                         0.12786            0.58696            0.76071</span>
<span class="co">## Adj. R2                    0.07098            0.56002            0.74510</span>
<span class="co">## ---</span>
<span class="co">## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="some-notes">Some notes<a class="anchor" aria-label="anchor" href="#some-notes"></a>
</h2>
<div class="section level5">
<h5 id="note-on-standard-errors">Note on standard-errors<a class="anchor" aria-label="anchor" href="#note-on-standard-errors"></a>
</h5>
<p>Defining the standard-errors at estimation time, by using the arguments <code>se</code> or <code>cluster</code>, can be useful to obtain a coherent set of standard-errors across results, especially if the fixed-effects are modified (which will modify the default clustering of standard-errors across models).</p>
</div>
<div class="section level5">
<h5 id="note-on-ivs">Note on IVs<a class="anchor" aria-label="anchor" href="#note-on-ivs"></a>
</h5>
<p>IV estimations return a regular <code>fixest</code> object. The <code>summary</code> applied to it however can return a <code>fixest_multi</code> object. This is the case when both the first and second stage regressions are requested using the argument <code>stage = 1:2</code>. You can then cherry-pick the results as before using, e.g. <code>res[iv = 1]</code>. Note, importantly, that the index refers to the order of the results and 1 here does not mean the first stage.</p>
</div>
<div class="section level5">
<h5 id="note-on-memory-usage">Note on memory usage<a class="anchor" aria-label="anchor" href="#note-on-memory-usage"></a>
</h5>
<p>The objects returned by <code>fixest</code> estimations are large. They contain the necessary information to apply various methods without incurring additional computing costs. This is particularly true for clustering the standard-errors for instance. Stated differently speed is privileged over memory usage.</p>
<p>The problem when it comes to multiple estimations is that it is very easy to perform many many estimations leading to a ballooning of object size possibly getting out of control at some point. To circumvent this issue, here’s what to do:</p>
<ol style="list-style-type: decimal">
<li>use the argument <code>vcov</code> to get a summary of the results with the appropriate standard-errors at estimation time,</li>
<li>use the argument <code>lean = TRUE</code>.</li>
</ol>
<p>This will perform the estimation with the appropriate standard errors (point 1) and clean any large object from the results (point 2).</p>
<p>The drawback of this is that you won’t be able to apply some methods to the results (like changing the type of standard-errors, <code>predict</code>, <code>resid</code>, etc). But the amount of memory saved can be considerable.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Laurent Berge.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
