<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This utility tool displays the number of unique elements in one or multiple data.frames as well as their number of NA values."><title>Prints the number of unique elements in a data set — n_unik • fixest</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prints the number of unique elements in a data set — n_unik"><meta property="og:description" content="This utility tool displays the number of unique elements in one or multiple data.frames as well as their number of NA values."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">fixest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.11.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/fixest_walkthrough.html">Fast Fixed-Effects Estimation: Short Introduction</a>
    <a class="dropdown-item" href="../articles/multiple_estimations.html">Multiple estimations</a>
    <a class="dropdown-item" href="../articles/standard_errors.html">On standard-errors</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Estimation tables</h6>
    <a class="dropdown-item" href="../articles/exporting_tables.html">Exporting estimation tables</a>
    <a class="dropdown-item" href="../articles/etable_new_features.html">`etable`: new features in `fixest` 0.10.2</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lrberge/fixest/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Prints the number of unique elements in a data set</h1>
      <small class="dont-index">Source: <a href="https://github.com/lrberge/fixest/blob/HEAD/R/data_tools.R" class="external-link"><code>R/data_tools.R</code></a></small>
      <div class="d-none name"><code>n_unik.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This utility tool displays the number of unique elements in one or multiple data.frames as well as their number of NA values.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">n_unik</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for vec_n_unik</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for list_n_unik</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>A formula, with data set names on the LHS and variables on the RHS, like <code>data1 + data2 ~ var1 + var2</code>. The following special variables are admitted: <code>"."</code> to get default values, <code>".N"</code> for the number of observations, <code>".U"</code> for the number of unique rows, <code>".NA"</code> for the number of rows with at least one NA. Variables can be combined with <code>"^"</code>, e.g. <code>df~id^period</code>; use <code>id%^%period</code> to also include the terms on both sides. Note that using <code>:</code> and <code>*</code> is equivalent to <code>^</code> and <code>%^%</code>. Sub select with <code>id[cond]</code>, when doing so <code>id</code> is automatically included. Conditions can be chained, as in <code>id[cond1, cond2]</code>. Use <code>NA(x, y)</code> in conditions instead of <code>is.na(x) | is.na(y)</code>. Use the <code>!!</code> operator to have both a condition and its opposite. To compare the keys in two data sets, use <code>data1:data2</code>. If not a formula, <code>x</code> can be: a vector (displays the # of unique values); a <code>data.frame</code> (default values are displayed), or a "sum" of data sets like in <code>x = data1 + data2</code>, in that case it is equivalent to <code>data1 + data2 ~ .</code>.</p></dd>


<dt>...</dt>
<dd><p>Not currently used.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>It returns a vector containing the number of unique values per element. If several data sets were provided, a list is returned, as long as the number of data sets, each element being a vector of unique values.</p>
    </div>
    <div class="section level2">
    <h2 id="special-values-and-functions">Special values and functions<a class="anchor" aria-label="anchor" href="#special-values-and-functions"></a></h2>
    


<p>In the formula, you can use the following special values: <code>"."</code>, <code>".N"</code>, <code>".U"</code>, and <code>".NA"</code>.</p>
<ul><li><p><code>"."</code>Accesses the default values. If there is only one data set and the data set is <em>not</em> a <code>data.table</code>, then the default is to display the number of observations and the number of unique rows. If the data is a <code>data.table</code>, the number of unique items in the key(s) is displayed instead of the number of unique rows (if the table has keys of course). If there are two or more data sets, then the default is to display the unique items for: a) the variables common across all data sets, if there's less than 4, and b) if no variable is shown in a), the number of variables common across at least two data sets, provided there are less than 5. If the data sets are data tables, the keys are also displayed on top of the common variables. In any case, the number of observations is always displayed.</p></li>
<li><p><code>".N"</code>Displays the number of observations.</p></li>
<li><p><code>".U"</code>Displays the number of unique rows.</p></li>
<li><p><code>".NA"</code>Displays the number of rows with at least one NA.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="the-na-function">The <code>NA</code> function<a class="anchor" aria-label="anchor" href="#the-na-function"></a></h2>
    


<p>The special function <code>NA</code> is an equivalent to <code>is.na</code> but can handle several variables. For instance, <code>NA(x, y)</code> is equivalent to <code>is.na(x) | is.na(y)</code>. You can add as many variables as you want as arguments. If no argument is provided, as in <code>NA()</code>, it is identical to having all the variables of the data set as argument.</p>
    </div>
    <div class="section level2">
    <h2 id="combining-variables">Combining variables<a class="anchor" aria-label="anchor" href="#combining-variables"></a></h2>
    


<p>Use the "hat", <code>"^"</code>, operator to combine several variables. For example <code>id^period</code> will display the number of unique values of id x period combinations.</p>
<p>Use the "super hat", <code>"%^%"</code>, operator to also include the terms on both sides. For example, instead of writing <code>id + period + id^period</code>, you can simply write <code>id%^%period</code>.</p>
<p>Alternatively, you can use <code>:</code> for <code>^</code> and <code>*</code> for <code>%^%</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="sub-selections">Sub-selections<a class="anchor" aria-label="anchor" href="#sub-selections"></a></h2>
    


<p>To show the number of unique values for sub samples, simply use <code>[]</code>. For example, <code>id[x &gt; 10]</code> will display the number of unique <code>id</code> for which <code>x &gt; 10</code>.</p>
<p>Simple square brackets lead to the inclusion of both the variable and its subset. For example <code>id[x &gt; 10]</code> is equivalent to <code>id + id[x &gt; 10]</code>. To include only the sub selection, use double square brackets, as in <code>id[[x &gt; 10]]</code>.</p>
<p>You can add multiple sub selections at once, only separate them with a comma. For example <code>id[x &gt; 10, NA(y)]</code> is equivalent to <code>id[x &gt; 10] + id[NA(y)]</code>.</p>
<p>Use the double negative operator, i.e. <code>!!</code>, to include both a condition and its opposite at once. For example <code>id[!!x &gt; 10]</code> is equivalent to <code>id[x &gt; 10, !x &gt; 10]</code>. Double negative operators can be chained, like in <code>id[!!cond1 &amp; !!cond2]</code>, then the cardinal product of all double negatived conditions is returned.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Laurent Berge</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">=</span> <span class="va">base_did</span></span></span>
<span class="r-in"><span><span class="va">data</span><span class="op">$</span><span class="va">x1.L1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">x1</span><span class="op">~</span><span class="va">id</span><span class="op">+</span><span class="va">period</span>, <span class="fl">1</span>, <span class="va">data</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># By default, just the formatted number of observations</span></span></span>
<span class="r-in"><span><span class="fu">n_unik</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## # Observations: 1,080 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  # Unique rows: 1,080 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or the nber of unique elements of a vector</span></span></span>
<span class="r-in"><span><span class="fu">n_unik</span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">id</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## id: 108 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># number of unique id values and id x period pairs</span></span></span>
<span class="r-in"><span><span class="fu">n_unik</span><span class="op">(</span><span class="va">data</span> <span class="op">~</span><span class="va">.N</span> <span class="op">+</span> <span class="va">id</span> <span class="op">+</span> <span class="va">id</span><span class="op">^</span><span class="va">period</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## # Observations: 1,080 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##             id:   108 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##      id^period: 1,080 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use the %^% operator to include the terms on the two sides at once</span></span></span>
<span class="r-in"><span><span class="co"># =&gt; same as id*period</span></span></span>
<span class="r-in"><span><span class="fu">n_unik</span><span class="op">(</span><span class="va">data</span> <span class="op">~</span><span class="va">.N</span> <span class="op">+</span> <span class="va">id</span> <span class="op">%^%</span> <span class="va">period</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## # Observations: 1,080 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##             id:   108 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##         period:    10 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##      id^period: 1,080 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># using sub selection with []</span></span></span>
<span class="r-in"><span><span class="fu">n_unik</span><span class="op">(</span><span class="va">data</span> <span class="op">~</span><span class="va">.N</span> <span class="op">+</span> <span class="va">period</span><span class="op">[</span><span class="op">!</span><span class="cn">NA</span><span class="op">(</span><span class="va">x1.L1</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##     # Observations: 1,080 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##             period:    10 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## period[!NA(x1.L1)]:     9 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># to show only the sub selection: [[]]</span></span></span>
<span class="r-in"><span><span class="fu">n_unik</span><span class="op">(</span><span class="va">data</span> <span class="op">~</span><span class="va">.N</span> <span class="op">+</span> <span class="va">period</span><span class="op">[[</span><span class="op">!</span><span class="cn">NA</span><span class="op">(</span><span class="va">x1.L1</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##     # Observations: 1,080 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## period[!NA(x1.L1)]:     9 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># you can have multiple values in [],</span></span></span>
<span class="r-in"><span><span class="co"># just separate them with a comma</span></span></span>
<span class="r-in"><span><span class="fu">n_unik</span><span class="op">(</span><span class="va">data</span> <span class="op">~</span><span class="va">.N</span> <span class="op">+</span> <span class="va">period</span><span class="op">[</span><span class="op">!</span><span class="cn">NA</span><span class="op">(</span><span class="va">x1.L1</span><span class="op">)</span>, <span class="va">x1</span> <span class="op">&gt;</span> <span class="fl">7</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##     # Observations: 1,080 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##             period:    10 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## period[!NA(x1.L1)]:     9 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##     period[x1 &gt; 7]:     7 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># to have both a condition and its opposite,</span></span></span>
<span class="r-in"><span><span class="co"># use the !! operator</span></span></span>
<span class="r-in"><span><span class="fu">n_unik</span><span class="op">(</span><span class="va">data</span> <span class="op">~</span><span class="va">.N</span><span class="op">[</span><span class="op">!</span><span class="op">!</span><span class="cn">NA</span><span class="op">(</span><span class="va">x1.L1</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##         # Observations: 1,080 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  # Obs. with NA(x1.L1):   108 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## # Obs. with !NA(x1.L1):   972 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># the !! operator works within condition chains</span></span></span>
<span class="r-in"><span><span class="fu">n_unik</span><span class="op">(</span><span class="va">data</span> <span class="op">~</span><span class="va">.N</span><span class="op">[</span><span class="op">!</span><span class="op">!</span><span class="cn">NA</span><span class="op">(</span><span class="va">x1.L1</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span><span class="op">!</span><span class="va">x1</span> <span class="op">&gt;</span> <span class="fl">7</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##                   # Observations: 1,080 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##   # Obs. with NA(x1.L1) &amp; x1 &gt; 7:     3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  # Obs. with !NA(x1.L1) &amp; x1 &gt; 7:    10 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  # Obs. with NA(x1.L1) &amp; !x1 &gt; 7:   105 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## # Obs. with !NA(x1.L1) &amp; !x1 &gt; 7:   962 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Conditions can be distributed</span></span></span>
<span class="r-in"><span><span class="fu">n_unik</span><span class="op">(</span><span class="va">data</span> <span class="op">~</span> <span class="op">(</span><span class="va">id</span> <span class="op">+</span> <span class="va">period</span><span class="op">)</span><span class="op">[</span><span class="va">x1</span> <span class="op">&gt;</span> <span class="fl">7</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##             id: 108 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##     id[x1 &gt; 7]:  13 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##         period:  10 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## period[x1 &gt; 7]:   7 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># Several data sets</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Typical use case: merging</span></span></span>
<span class="r-in"><span><span class="co"># Let's create two data sets and merge them</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">base_did</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">base_main</span> <span class="op">=</span> <span class="va">base_did</span></span></span>
<span class="r-in"><span><span class="va">base_extra</span> <span class="op">=</span> <span class="fu"><a href="sample_df.html">sample_df</a></span><span class="op">(</span><span class="va">base_main</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"period"</span><span class="op">)</span><span class="op">]</span>, <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">base_extra</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span> <span class="op">=</span> <span class="fl">111</span><span class="op">:</span><span class="fl">120</span></span></span>
<span class="r-in"><span><span class="va">base_extra</span><span class="op">$</span><span class="va">period</span><span class="op">[</span><span class="fl">11</span><span class="op">:</span><span class="fl">20</span><span class="op">]</span> <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">20</span></span></span>
<span class="r-in"><span><span class="va">base_extra</span><span class="op">$</span><span class="va">z</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can use db1:db2 to compare the common keys in two data sets</span></span></span>
<span class="r-in"><span> <span class="fu">n_unik</span><span class="op">(</span><span class="va">base_main</span><span class="op">:</span><span class="va">base_extra</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##                 base_main base_extra </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## # Observations:     1,080        100 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##             id:       108         73 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## # Exclusive   |        45         10 # Common: 63</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##         period:        10         20 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## # Exclusive   |         0         10 # Common: 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##      id^period:     1,080        100 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## # Exclusive   |     1,000         20 # Common: 80</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tmp</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">base_main</span>, <span class="va">base_extra</span>, all.x <span class="op">=</span> <span class="cn">TRUE</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"period"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can show unique values for any variable, as before</span></span></span>
<span class="r-in"><span><span class="fu">n_unik</span><span class="op">(</span><span class="va">tmp</span> <span class="op">+</span> <span class="va">base_main</span> <span class="op">+</span> <span class="va">base_extra</span> <span class="op">~</span> <span class="va">id</span><span class="op">[</span><span class="op">!</span><span class="op">!</span><span class="cn">NA</span><span class="op">(</span><span class="va">z</span><span class="op">)</span><span class="op">]</span> <span class="op">+</span> <span class="va">id</span><span class="op">^</span><span class="va">period</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##               tmp base_main base_extra</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##         id:   108       108         73</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  id[NA(z)]:   108        --          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## id[!NA(z)]:    59        --         73</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ##  id^period: 1,080     1,080        100</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Laurent Berge.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

